\subsection{Slučaj upotrebe: Kupovina karata uživo}

\subsubsection*{Kratak opis}
Gledalac kupuje karte za odabranu predstavu na blagajni.
\subsubsection*{Akteri}
\begin{itemize}
    \item \textbf{Gledalac} -- osoba koja želi da kupi karte za predstavu na blagajni.
     \item \textbf{Blagajnik} -- prodaje karte i evidentira transakciju u sistemu.
\end{itemize}

\subsubsection*{Preduslovi}
\begin{itemize}
    \item Blagajnik je prijavljen i ovlašćen da koristi sistem.
    \item Sistem je ispravan.
\end{itemize}

\subsubsection*{Postuslovi}
\begin{itemize}
    \item Gledalac je uspešno kupio karte.
    \item Sistem je ažurirao broj dostupnih karata.
\end{itemize}

\subsubsection*{Osnovni tok}
\begin{enumerate}
    \item Gledalac dolazi na blagajnu i navodi predstavu i termin za koji želi da kupi karte.
    \item Blagajnik bira opciju za novu kupovinu.
    \item Sistem započinje novu kupovinu.
    \item Blagajnik bira predstavu i termin.
    \item Sistem prikazuje dostupna mesta i cene karata.
    \item Gledalac bira sedišta.
    \item Blagajnik potvrđuje izbor.
    \item Sistem prikazuje ukupan iznos i opcije plaćanja.
    \item Blagajnik pita Gledaoca da li mu treba gotovinski račun:
    \begin{itemize}
        \item Ukoliko Gledalac traži gotovinski račun $\rightarrow$ Izvršava se podtok \textbf{P1}.
    \end{itemize}
    \item Gledalac bira način plaćanja:
    \begin{itemize}
        \item Ukoliko Gledalac bira plaćanje gotovinom $\rightarrow$ Izvršava se podtok \textbf{P2}.
        \item Ukoliko Gledalac bira plaćanje karticom $\rightarrow$ Izvršava se podtok \textbf{P3}.
    \end{itemize}
    \item Blagajnik zaključuje račun.
    \item Sistem automatski evidentira transakciju.
    \item Sistem ažurira broj slobodnih mesta.
    \item Sistem izdaje račun.
    \item Blagajnik predaje račun i karte Gledaocu.
\end{enumerate}

\subsubsection*{Podtokovi}

\textbf{P1: Gotovinski račun}
\begin{enumerate}
    \item Gledalac daje PIB firme.
    \item Blagajnik unosi PIB firme u sistem.
\end{enumerate}

\textbf{P2: Plaćanje gotovinom}
\begin{enumerate}
    \item Gledalac predaje novac Blagajniku.
    \item Blagajnik unosi iznos u sistem.
    \item Sistem računa kusur i prikazuje ga.
    \item Blagajnik vraća kusur.
\end{enumerate}

\textbf{P3: Plaćanje karticom }
\begin{enumerate}
    \item Blagajnik označava opciju za plaćanje karticom.
    \item Blagajnik pruža terminal Gledaocu.
    \item Gledalac prislanja ili ubacuje karticu i unosi PIN.
    \item Sistem šalje zahtev banci i čeka potvrdu.
    \item Sistem dobija potvrdu o uspešnoj transakciji i evidentira plaćanje.
    
\end{enumerate}

\subsubsection*{Alternativni tokovi}

\textbf{A1: Nema dostupnih karata}
\begin{itemize}
    \item Sistem obaveštava Blagajnika da nema dostupnih karata za izabranu predstavu. Blagajnik nudi druge termine Gledaocu i ako je on zaiintereosvan slučaj se vraća na korak 4.
\end{itemize}

\textbf{A2: Kupac odustaje od kupovine}
\begin{itemize}
    \item Ovaj tok se može desiti u bilo kom trenutku pre zaključivanja računa. Blagajnik bira opciju "Otkaži transakciju". Sistem oslobađa eventualno rezervisana sedišta. Slučaj upotrebe se završava neuspešno.
\end{itemize}

\textbf{A3: Neuspešna transakcija karticom}
\begin{itemize}
    \item \textit{Ovaj tok se dešava u koraku P3.5 ukoliko banka odbije transakciju.}
    \item Sistem prikazuje poruku o grešci (npr. pogrešan PIN, nedovoljno sredstava).
    \item Blagajnik pita kupca da li želi da pokuša ponovo.
    \begin{itemize}
        \item Ako Gledalac želi ponovni pokušaj $\rightarrow$ Povratak na korak P3.3.
        \item Ako Gledalac želi drugi način plaćanja $\rightarrow$ Povratak na korak 10 Osnovnog toka.
        \item Ako Gledalac odustane $\rightarrow$ Prelazak na alternativni tok A2.
    \end{itemize}
\end{itemize}

\subsubsection*{Specijalni zahtevi: /}

\subsubsection*{Dodatne informacije: /}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{Dijagrami/Dijagram slučajeva upotrebe/kupovina_karata_uzivo.png} 
    \caption{Dijagram slučaja upotrebe "Kupovina karata uživo"}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{./Dijagrami/BPMN/kupovina_karata_uzivo.png} 
    \caption{BPMN dijagram saradnje "Kupovina karata uživo"}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{./Dijagrami/Dijagram sekvence/kupovina_karata_uzivo.png} 
    \caption{Dijagram sekvence "Kupovina karata uživo"}
\end{figure}

\newpage
